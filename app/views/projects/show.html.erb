<h1><%= @project.name %></h1>
<div class="row">
  <div class="col-sm-3 card-gray">
    <ul class="nav flex-column">
      <li class="nav-item text-center"><%= link_to 'Add a task', new_project_task_path(@project), class:"nav-link"%></li>
      <li class="nav-item text-center"><%= link_to 'Daily Report', project_tasks_path(@project), class:"nav-link" %></li>
      <li class="nav-item text-center"><%= link_to 'Mark as Complete ', complete_project_path(@project), class:"fa fa-check-square-o", id: "mark_complete_#{@project.id}" %></li>
      <li class="nav-item text-center" ><%= link_to 'Cancel Project', cancel_project_path(@project), class:"fa fa-ban", id: "mark_cancelled_#{@project.id}" %></li>
      <li class="nav-item text-center" ><%= link_to 'Pause Project', pause_project_path(@project),  class:"fa fa-pause-circle", id: "pause_#{@project.id}" %></li>
    </ul>


  </div>
  <div class="col-sm-7">
    <div class="container status-cards mt-3">
      <div class="row">
        <div class="col-sm-3">
          <div class="card card-inverse card-gray text-center">
            <i class="fa fa-calendar fa-4x fa-inverse"></i>
            <h4 class="mt-3">Starting: <%= @project.start_date %> Ending: <%= @project.end_date %></h4>
          </div>
        </div>
        <div class="col-sm-3">
          <div class="card card-inverse card-warning text-center">
            <i class="fa fa-flag fa-4x fa-inverse"></i>
            <h4 class="mt-3"><%= @project.tasks.where(status: 0).count %> Active Tasks</h4>

          </div>
        </div>
        <div class="col-sm-3">
          <div class="card card-inverse card-danger text-center">
            <i class="fa fa-fire fa-4x fa-inverse"></i>
            <h4 class="mt-3"><%= @project.tasks.where(status: 1).count %> Tasks Past Due</h4>

          </div>
        </div>
        <div class="col-sm-3">
          <div class="card card-inverse card-success text-center">
            <i class="fa fa-trophy fa-4x fa-inverse"></i>
            <h4 class="mt-3">Done this week</h4>

          </div>
        </div>

      </div>
    </div>

    <table class="table">
      <thead>
        <tr>
          <th>Task Name</th>
          <th>Estimated Start Date</th>
          <th>Estimated Duration</th>
          <th>Estimated End Date</th>
          <th>Status</th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% @tasks.each do |task| %>
          <tr>
            <td> <%= link_to task.name, project_task_path(@project, task) %> </td>
            <td> <%= task.estimated_start_date %></td>
            <td> <%= task.duration %> </td>
            <td> <%= task.estimated_end_date %></td>
            <td> <%= task.status %></td>
            <% if task.Completed? %>
              <td><%= (task.actual_duration * 3600).truncate(0) %> hours</td>
              <td><%= task.updated_at.strftime("Completed on %m/%d/%Y")  %></td>
            <% else %>
              <% if task.Paused? %>
                <td> <%= link_to 'Resume Task', resume_project_task_path(@project, task), id:"start_task_#{task.id}" %></td>
              <% else %>
                <td> <%= link_to 'Start Task', start_project_task_path(@project, task), id:"start_task_#{task.id}" %></td>
              <% end %>
              <td> <%= link_to 'Edit Task', edit_project_task_path(@project, task) %></td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>

  </div>
</div>
